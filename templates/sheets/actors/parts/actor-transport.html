<table class="items">
    <thead>
    <tr>
        <th></th>
        <th>{{ localize "rmss.pc_sheet_items.item_name" }}</th>
        <th>{{ localize "rmss.pc_sheet_items.worn" }}</th>
        <th>{{ localize "rmss.pc_sheet_items.quantity" }}</th>
        <th>{{ localize "rmss.pc_sheet_items.weight" }}</th>
        <th>{{ localize "rmss.pc_sheet_items.cost" }}</th>
        <th>
            <a class="item-control item-create" title="Create Transport" data-type="transport">
                <i class="fas fa-plus"></i>{{ localize "rmss.pc_sheet_items.add_item" }}
            </a>
        </th>
    </tr>
    </thead>

    <tbody>

    {{!-- ==================== TRANSPORTS (CONTAINERS) ==================== --}}
    {{#each transportContainers as |group|}}
    {{!-- Transport row --}}
    <tr class="container-row" data-item-id="{{group.container._id}}" draggable="true"
        data-type="Item" data-uuid="Actor.{{group.container.actorId}}.Item.{{group.container._id}}">
        <td><img src="{{group.container.img}}" alt="{{group.container.name}}" width="32" height="32"/></td>
        <td><strong>{{group.container.name}}{{#if group.container.system.description}}
          <i class="fas fa-info-circle spell-info-icon"
             data-tooltip="{{group.container.system.description}}"></i>
          {{/if}}</strong></td>
        <td>
            {{#if group.container.system.worn}}
            <a class="equippable" data-item-id="{{group.container._id}}">
                <i class="fa-regular fa-square-check"></i>
            </a>
            {{else}}
            <a class="equippable" data-item-id="{{group.container._id}}">
                <i class="fa-regular fa-square"></i>
            </a>
            {{/if}}
        </td>
        <td>{{group.container.system.quantity}}</td>
        <td>{{group.container.system.weight}}</td>
        <td>
            {{#if (gt group.container.system.unitCost 0)}}
            {{group.container.system.unitCost}} <span>{{localize (concat "rmss.currency_type_abb." group.container.system.currency_type)}}</span>
            {{else}}
            {{group.container.system.unitCost}}
            {{/if}}
        </td>
        <td class="item-controls">
            {{#if (gt group.container.system.quantity 1)}}
            <a class="item-control split-stack" data-item-id="{{group.container._id}}" title="Split pile">
                <i class="fa-solid fa-split"></i>
            </a>
            {{/if}}
            <a class="item-give" title="Give item" data-item-id="{{group.container._id}}">
                <i class="fas fa-hands-helping"></i>
            </a>
            <a class="item-control item-edit" title="Edit Item" data-item-id="{{group.container._id}}">
                <i class="fas fa-edit"></i>
            </a>
            <a class="item-control item-delete" title="Delete Item" data-item-id="{{group.container._id}}">
                <i class="fas fa-trash"></i>
            </a>
        </td>
    </tr>

    {{!-- Contained items in transport --}}
    {{#each group.contents as |item|}}
    <tr class="contained-item" data-item-id="{{item._id}}" draggable="true"
        data-type="Item" data-uuid="Actor.{{item.actorId}}.Item.{{item._id}}">
        <td class="indent"><img src="{{item.img}}" alt="{{item.name}}" width="32" height="32"/></td>
        <td class="indent">{{item.name}}{{#if item.system.description}}
          <i class="fas fa-info-circle spell-info-icon"
             data-tooltip="{{item.system.description}}"></i>
          {{/if}}</td>
        <td>
            {{#if item.system.worn}}
            <a class="equippable" data-item-id="{{item._id}}">
                <i class="fa-regular fa-square-check"></i>
            </a>
            {{else}}
            <a class="equippable" data-item-id="{{item._id}}">
                <i class="fa-regular fa-square"></i>
            </a>
            {{/if}}
        </td>
        <td>{{item.system.quantity}}</td>
        <td>{{item.system.weight}}</td>
        <td>
            {{#if (or (eq item.type "weapon") (eq item.type "armor"))}}
            {{#if (gt item.system.unitCost 0)}}
            {{item.system.unitCost}} <span>{{localize (concat "rmss.currency_type_abb." item.system.currency_type)}}</span>
            {{else}}
            {{item.system.unitCost}}
            {{/if}}
            {{else}}
            {{#if (gt item.system.cost 0)}}
            {{item.system.cost}} <span>{{localize (concat "rmss.currency_type_abb." item.system.currency_type)}}</span>
            {{else}}
            {{item.system.cost}}
            {{/if}}
            {{/if}}
        </td>
        <td class="item-controls">
            {{#if (gt item.system.quantity 1)}}
            <a class="item-control split-stack" data-item-id="{{item._id}}" title="Split pile">
                <i class="fa-solid fa-split"></i>
            </a>
            {{/if}}
            <a class="item-give" title="Give item" data-item-id="{{item._id}}">
                <i class="fas fa-hands-helping"></i>
            </a>
            <a class="item-control item-edit" title="Edit Item" data-item-id="{{item._id}}">
                <i class="fas fa-edit"></i>
            </a>
            <a class="item-control item-delete" title="Delete Item" data-item-id="{{item._id}}">
                <i class="fas fa-trash"></i>
            </a>
        </td>
    </tr>
    {{/each}}
    {{/each}}

    </tbody>
</table>

